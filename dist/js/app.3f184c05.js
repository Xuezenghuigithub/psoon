(function(t){function e(e){for(var a,r,o=e[0],c=e[1],u=e[2],l=0,h=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var o=n[r];0!==s[o]&&(a=!1)}a&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},s={app:0},i=[];function o(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-78a21d0d":"d199f444"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-78a21d0d":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-78a21d0d":"a1949d00"}[t]+".css",s=c.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===s))return e()}var h=document.getElementsByTagName("style");for(o=0;o<h.length;o++){u=h[o],l=u.getAttribute("data-href");if(l===a||l===s)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var a=e&&e.target&&e.target.src||s,i=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[t],d.parentNode.removeChild(d),n(i)},d.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){r[t]=0})));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t);var h=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",h.name="ChunkLoadError",h.type=a,h.request=r,n[1](h)}s[t]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var h=0;h<u.length;h++)e(u[h]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1035:function(t,e,n){t.exports=n.p+"img/brand.921bd736.svg"},"3e40":function(t,e,n){t.exports=n.p+"img/starry.296d68b0.jpg"},"465c":function(t,e,n){},"4e0f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("top-bar"),n("router-view",{staticClass:"container-index"}),n("bottom-bar")],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:"",dark:""}},[a("div",{staticClass:"d-flex align-center brand"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Logo",contain:"",src:n("7b2a"),width:"40"}}),a("router-link",{attrs:{tag:"span",to:"/Home"}},[a("v-img",{attrs:{src:n("1035"),contain:"",height:"30",width:"130"}})],1)],1),a("v-spacer"),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{text:""},on:{click:function(e){t.canClick&&t.login()}}},t.showList&&n),[a("span",{staticClass:"mr-2"},[t._v(t._s(t.username))]),a("v-icon",[t._v("mdi-account-circle")])],1)]}}])},[a("v-list",{attrs:{flat:""}},[a("v-list-item-group",[a("router-link",{attrs:{to:"/Manage"}},[t.isAdmin?a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-cogs")])],1),a("v-list-item-content",[a("router-link",{attrs:{tag:"span",to:"/Manage"}},[a("v-list-item-title",[t._v("管理")])],1)],1)],1):t._e()],1),a("v-list-item",{on:{click:t.logOut}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account-arrow-left")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("登出")])],1)],1)],1)],1)],1),a("v-btn",{attrs:{href:"https://github.com/Xuezenghuigithub/psoon",target:"_blank",text:""}},[a("span",{staticClass:"mr-2"},[t._v("GitHub")]),a("v-icon",[t._v("mdi-github")])],1)],1)},o=[],c=new a["a"],u={name:"",data:function(){return{username:"Sign in",showList:!1,canClick:!0}},computed:{isAdmin:{get:function(){return localStorage.getItem("isAdmin")},set:function(t){}}},mounted:function(){var t=this;this.init(),c.$on("loginBtn",(function(e){t.init()}))},methods:{init:function(){var t=localStorage.getItem("username");this.isAdmin=localStorage.getItem("isAdmin"),t&&(this.canClick=!1,this.showList=!0,this.username=t)},login:function(){c.$emit("topBarLogin",!0)},logOut:function(){localStorage.removeItem("username"),localStorage.removeItem("isAdmin"),this.showList=!1,this.canClick=!0,this.username="Sign In"}}},l=u,h=n("2877"),d=n("6544"),m=n.n(d),v=n("40dc"),p=n("8336"),g=n("132d"),f=n("adda"),w=n("8860"),b=n("da13"),k=n("5d23"),C=n("1baa"),x=n("34c3"),_=n("e449"),S=n("2fa4"),y=Object(h["a"])(l,i,o,!1,null,"1b06ea88",null),I=y.exports;m()(y,{VAppBar:v["a"],VBtn:p["a"],VIcon:g["a"],VImg:f["a"],VList:w["a"],VListItem:b["a"],VListItemContent:k["a"],VListItemGroup:C["a"],VListItemIcon:x["a"],VListItemTitle:k["b"],VMenu:_["a"],VSpacer:S["a"]});var V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-bottom-navigation",{attrs:{dark:"","hide-on-scroll":"",horizontal:""}},[n("v-btn",{attrs:{disabled:t.ownCount>=10,value:"recent",block:""},on:{click:t.like}},[n("span",[t._v("Like "+t._s(t.likeCount))]),n("v-icon",[t._v(t._s(t.ownCount>=10?"mdi-thumb-up":"mdi-thumb-up-outline"))])],1)],1)},O=[],$=(n("e25e"),n("96cf"),n("1da1")),j={name:"",data:function(){return{likeCount:0,ownCount:0}},mounted:function(){localStorage.setItem("ownCount",0),this.ownCount=parseInt(localStorage.getItem("ownCount")),this.getCount()},methods:{getCount:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.fetch("/api/other/like");case 2:n=e.sent,a=n.data,200===a.status?t.likeCount=a.result.count:t.$snackbar().showError();case 5:case"end":return e.stop()}}),e)})))()},like:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=parseInt(localStorage.getItem("ownCount")),!(n>=10)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.$request.fetch("/api/other/like",{},"post");case 5:a=e.sent,r=a.data,200===r.status?(t.likeCount=r.result.count+1,s=n+1,localStorage.setItem("ownCount",s),t.ownCount=s):t.$snackbar().showError("点赞失败，请刷新重试");case 8:case"end":return e.stop()}}),e)})))()}}},L=j,R=n("b81c"),E=Object(h["a"])(L,V,O,!1,null,"776dcd86",null),B=E.exports;m()(E,{VBottomNavigation:R["a"],VBtn:p["a"],VIcon:g["a"]});var T={name:"App",components:{TopBar:I,BottomBar:B},data:function(){return{}},mounted:function(){this.setUsername()},methods:{setUsername:function(){var t=localStorage.getItem("username");t&&(this.username=t,this.loginFlag=!1)},login:function(){this.showSignIn=!0}}},P=T,A=(n("5c0b"),n("7496")),M=Object(h["a"])(P,r,s,!1,null,null,null),U=M.exports;m()(M,{VApp:A["a"]});n("d3b7");var z=n("8c4f"),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-parallax",{staticClass:"py-10",attrs:{height:"2500",src:n("3e40")}},[a("v-overlay",{directives:[{name:"show",rawName:"v-show",value:t.showSignIn,expression:"showSignIn"}],attrs:{opacity:".7",light:""}},[a("sign-in",{on:{emitSignIn:t.emitSignIn}})],1),a("v-overlay",{directives:[{name:"show",rawName:"v-show",value:t.showSignUp,expression:"showSignUp"}],attrs:{opacity:".7",light:""}},[a("sign-up",{on:{emitSignUp:t.emitSignUp}})],1),a("v-row",{staticClass:"text-center",attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12"}},[a("v-img",{staticClass:"my-10",attrs:{src:n("e347"),contain:"",height:"400"}})],1),a("v-col",{staticClass:"mt-8 pr-0",attrs:{cols:"3"}},[a("span",{staticClass:"display-2 font-weight-bold"},[t._v(" Welcome to ")])]),a("v-col",{staticClass:"pl-0",attrs:{cols:"4"}},[a("v-img",{attrs:{src:n("1035"),contain:"",height:"80",width:"400"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-pre",{staticClass:"subheading font-weight-regular font-chinese"},[t._v(" 快速合成你需要的技术架构图 ")])],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"5"}},[a("v-card",{staticClass:"pa-3",attrs:{color:"rgba(198,208,222,.7)",elevation:"10",hover:"",light:"",shaped:""}},[a("v-autocomplete",{attrs:{label:"Please Select Tech",items:t.techList1,"item-text":"name","item-value":"_id"},on:{change:t.selected1},model:{value:t.tech1,callback:function(e){t.tech1=e},expression:"tech1"}}),t.showImg1?a("v-img",{attrs:{alt:"Tech1",height:"400",contain:"",src:t.imgPath1}}):t._e()],1)],1),a("v-col",{attrs:{cols:"1",align:"center"}},[a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",{attrs:{large:"",color:t.color}},[t._v("mdi-palette")])],1)]}}])},[a("v-color-picker",{attrs:{elevation:"24","show-swatches":""},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)],1),a("v-col",{attrs:{cols:"5"}},[a("v-card",{staticClass:"pa-3",attrs:{color:"rgba(198,208,222,.7)",elevation:"10",hover:"",light:"",shaped:""}},[a("v-autocomplete",{attrs:{label:"Please Select Tech",items:t.techList2,"item-text":"name","item-value":"_id"},on:{change:t.selected2},model:{value:t.tech2,callback:function(e){t.tech2=e},expression:"tech2"}}),t.showImg2?a("v-img",{attrs:{alt:"Tech2",height:"400",src:t.imgPath2}}):t._e()],1)],1)],1),a("v-row",{staticClass:"mt-10",attrs:{justify:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-btn",{staticClass:"compose-button",attrs:{color:"#222",elevation:"24",width:"180",height:"70","x-large":""},on:{click:t.ps}},[a("v-img",{attrs:{src:n("86a3"),contain:"",height:"30"}})],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}],staticClass:"mt-10",attrs:{justify:"center"}},[a("v-col",{attrs:{align:"center"}},[a("canvas",{ref:"canvas"})])],1)],1)},q=[],H=(n("99af"),n("4de4"),n("4160"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"container"},[n("v-card",{staticClass:"card"},[n("v-btn",{staticClass:"mt-3",attrs:{depressed:"",icon:"",large:"",right:"",absolute:"",text:""},on:{click:t.close}},[n("v-icon",{attrs:{large:""}},[t._v("mdi-close")])],1),n("v-form",{ref:"form",staticClass:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{staticClass:"input-row"},[n("v-col",[n("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M0,20 a10,8 0 0,1 20,0z M10,0 a4,4 0 0,1 0,8 a4,4 0 0,1 0,-8"}})])]),n("v-text-field",{staticClass:"input",attrs:{rules:t.emailRules,label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("v-row",{staticClass:"input-row"},[n("v-col",[n("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M0,20 20,20 20,8 0,8z M10,13 10,16z M4,8 a6,8 0 0,1 12,0"}})])]),n("v-text-field",{staticClass:"input",attrs:{rules:t.passwordRules,label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("div",[n("v-btn",{staticClass:"submit",attrs:{disabled:!t.valid,absolute:"",bottom:"",align:"center",justify:"center",width:"300",rounded:"","x-large":"",color:"#FF3366"},on:{click:t.submit}},[t._v(" Sign in")])],1)],1),n("div",{staticClass:"sign-up-text"},[n("span",{},[t._v("Don't have an account?")]),n("a",{on:{click:t.signUp}},[t._v("Sign up")])])],1)],1)}),N=[],Z=n("8237"),D=n.n(Z),G={name:"SignIn",data:function(){return{email:"",password:"",emailRules:[function(t){return!!t||"必填"},function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||"格式有误"}],passwordRules:[function(t){return!!t||"必填"},function(t){return t.length<=16||"长度需小于16"},function(t){return t.length>=6||"长度需大于6"}],valid:!0}},methods:{close:function(){this.username="",this.password="",this.$refs.form.resetValidation(),this.$emit("emitSignIn",{function:"close"})},signUp:function(){this.username="",this.password="",this.$refs.form.resetValidation(),this.$emit("emitSignIn",{function:"signUp"})},submit:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=D()(t.password),e.next=3,t.$request.fetch("/api/login",{email:t.email,password:n},"post");case 3:a=e.sent,r=a.data,200===r.status?(t.$snackbar().showOk("是的，你登录成功了，但暂时还没有什么特殊的功能给你用"),localStorage.setItem("username",r.result.username),localStorage.setItem("isAdmin",r.result.is_admin),t.close()):5021===r.status?t.$snackbar().showError("用户不存在"):5022===r.status?t.$snackbar().showError("密码错误"):t.$snackbar().showError();case 6:case"end":return e.stop()}}),e)})))()}}},J=G,K=(n("8210"),n("b0af")),W=n("62ad"),X=n("a523"),Q=n("4bd4"),Y=n("0fd9"),tt=n("8654"),et=Object(h["a"])(J,H,N,!1,null,"47d35f38",null),nt=et.exports;m()(et,{VBtn:p["a"],VCard:K["a"],VCol:W["a"],VContainer:X["a"],VForm:Q["a"],VIcon:g["a"],VRow:Y["a"],VTextField:tt["a"]});var at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"container"},[n("v-card",{staticClass:"card"},[n("v-btn",{staticClass:"mt-3",attrs:{depressed:"",icon:"",large:"",right:"",absolute:"",text:""},on:{click:t.close}},[n("v-icon",{attrs:{large:""}},[t._v("mdi-close")])],1),n("v-form",{ref:"form",staticClass:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{staticClass:"input-row"},[n("v-col",[n("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M0,20 a10,8 0 0,1 20,0z M10,0 a4,4 0 0,1 0,8 a4,4 0 0,1 0,-8"}})])]),n("v-text-field",{staticClass:"input",attrs:{rules:t.nameRules,label:"Username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("v-row",{staticClass:"input-row"},[n("v-col",[n("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M0,20 20,20 20,8 0,8z M10,13 10,16z M4,8 a6,8 0 0,1 12,0"}})])]),n("v-text-field",{staticClass:"input",attrs:{rules:t.passwordRules,label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-row",{staticClass:"input-row"},[n("v-col",[n("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M17.051,3.302H2.949c-0.866,0-1.567,0.702-1.567,1.567v10.184c0,0.865,0.701,1.568,1.567,1.568h14.102c0.865,0,1.566-0.703,1.566-1.568V4.869C18.617,4.003,17.916,3.302,17.051,3.302z M17.834,15.053c0,0.434-0.35,0.783-0.783,0.783H2.949c-0.433,0-0.784-0.35-0.784-0.783V4.869c0-0.433,0.351-0.784,0.784-0.784h14.102c0.434,0,0.783,0.351,0.783,0.784V15.053zM15.877,5.362L10,9.179L4.123,5.362C3.941,5.245,3.699,5.296,3.581,5.477C3.463,5.659,3.515,5.901,3.696,6.019L9.61,9.86C9.732,9.939,9.879,9.935,10,9.874c0.121,0.062,0.268,0.065,0.39-0.014l5.915-3.841c0.18-0.118,0.232-0.36,0.115-0.542C16.301,5.296,16.059,5.245,15.877,5.362z"}})])]),n("v-text-field",{staticClass:"input",attrs:{"validate-on-blur":"",label:"Email",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("v-row",{staticClass:"input-row"},[n("v-btn",{staticClass:"mt-1 ml-2",attrs:{width:"100",loading:t.sendCodeButtonLoading,disabled:t.sendCodeButtonStep,large:"",color:"cyan darken-2"},on:{click:t.sendCode}},[t._v(t._s(t.sendCodeButtonText))]),n("v-text-field",{staticClass:"input",attrs:{rules:t.codeRules,"validate-on-blur":"",label:"Code"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),n("div",[n("v-btn",{staticClass:"submit",attrs:{disabled:!t.valid,bottom:"",align:"center",justify:"center",width:"300",rounded:"","x-large":"",color:"#FF3366"},on:{click:t.submit}},[t._v(" Sign up ")])],1)],1),n("div",{staticClass:"sign-up-text"},[n("span",[t._v("Already have an account?")]),n("a",{on:{click:t.signIn}},[t._v("Sign in")])])],1)],1)},rt=[],st=(n("4795"),{name:"Login",data:function(){return{email:"",username:"",password:"",sendCodeButtonText:"发送验证码",sendCodeButtonStep:!1,sendCodeButtonLoading:!1,code:"",nameRules:[function(t){return!!t||"必填"},function(t){return t.length<=10||"长度需小于10"}],passwordRules:[function(t){return!!t||"必填"},function(t){return t.length<=16||"长度需小于16"},function(t){return t.length>=6||"长度需大于6"}],emailRules:[function(t){return!!t||"必填"},function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||"格式有误"}],codeRules:[function(t){return!!t||"必填"},function(t){return 6==t.length||"格式有误"}],valid:!0}},methods:{close:function(){this.username="",this.password="",this.email="",this.code="",this.$refs.form.resetValidation(),this.$emit("emitSignUp",{function:"close"})},signIn:function(){this.username="",this.password="",this.email="",this.code="",this.$refs.form.resetValidation(),this.$emit("emitSignUp",{function:"signIn"})},sendCode:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sendCodeButtonLoading=!0,e.next=3,t.$request.fetch("/api/authCode",{email:t.email});case 3:if(n=e.sent,a=n.data,200===a.status){e.next=8;break}return t.sendCodeButtonLoading=!1,e.abrupt("return",t.$snackbar().showError("邮件发送失败，请刷新重试"));case 8:t.$snackbar().showOk("邮件发送成功"),t.sendCodeButtonLoading=!1,t.sendCodeButtonText=60,t.sendCodeButtonStep=!0,r=setInterval((function(){t.sendCodeButtonText--,t.sendCodeButtonText<=0&&(t.sendCodeButtonStep=!1,t.sendCodeButtonText="发送验证码",clearInterval(r))}),1e3);case 13:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=D()(t.password),a={email:t.email,username:t.username,password:n,code:t.code},e.next=4,t.$request.fetch("/api/user",a,"post");case 4:r=e.sent,s=r.data,200===s.status?(t.$snackbar().showOk("注册成功，登录吧狗子"),t.signIn()):5022===s.status?t.$snackbar().showError("验证码已过期"):5023===s.status?t.$snackbar().showError("验证码错误"):5024===s.status?t.$snackbar().showError("用户已存在"):t.$snackbar().showError("注册失败，找 Zander 去吧");case 7:case"end":return e.stop()}}),e)})))()}}}),it=st,ot=(n("8129"),Object(h["a"])(it,at,rt,!1,null,"2d39633f",null)),ct=ot.exports;m()(ot,{VBtn:p["a"],VCard:K["a"],VCol:W["a"],VContainer:X["a"],VForm:Q["a"],VIcon:g["a"],VRow:Y["a"],VTextField:tt["a"]});var ut=n("7bd6"),lt={name:"Home",components:{SignIn:nt,SignUp:ct},data:function(){return{staticPath:"http://localhost:2000/",techList1:[],techList2:[],showSignIn:!1,showSignUp:!1,imgPath1:"",imgPath2:"",showImg1:!1,showImg2:!1,showResult:!1,color:"#fff",tech1:"",tech2:""}},mounted:function(){var t=this;this.getTechs(),c.$on("topBarLogin",(function(e){t.showSignIn=e}))},methods:{getTechs:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.fetch("/api/tech/tech");case 2:n=e.sent,a=n.data,200===a.status?(t.techList1=a.result,t.techList2=a.result):t.$snackbar().showError();case 5:case"end":return e.stop()}}),e)})))()},emitSignIn:function(t){"close"===t["function"]?(this.showSignIn=!1,c.$emit("loginBtn",!1)):"signUp"===t["function"]&&(this.showSignIn=!1,this.showSignUp=!this.showSignIn)},emitSignUp:function(t){"close"===t["function"]?this.showSignUp=!1:"signIn"===t["function"]&&(this.showSignUp=!1,this.showSignIn=!this.showSignUp)},selected1:function(t){var e=this;this.showImg1=!0,this.techList2=this.techList1,this.techList2=this.techList2.filter((function(e){return e._id!==t})),this.techList1.forEach((function(n){n._id===t&&(e.imgPath1="".concat(e.staticPath).concat(n.path))}))},selected2:function(t){var e=this;this.showImg2=!0,this.techList2.forEach((function(n){n._id===t&&(e.imgPath2="".concat(e.staticPath).concat(n.path))}))},ps:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.tech1&&t.tech2){e.next=2;break}return e.abrupt("return",t.$snackbar().showError("未选择 Tech"));case 2:n={width:1e3,height:600,background:t.color,padding:20},ut["a"].compose(t.$refs.canvas,t.imgPath1,t.imgPath2,n),t.showResult=!0;case 5:case"end":return e.stop()}}),e)})))()}}},ht=lt,dt=(n("69d9"),n("c6a6")),mt=n("03a4"),vt=n("a797"),pt=n("8b9c"),gt=Object(h["a"])(ht,F,q,!1,null,"20e7e7c4",null),ft=gt.exports;m()(gt,{VAutocomplete:dt["a"],VBtn:p["a"],VCard:K["a"],VCol:W["a"],VColorPicker:mt["a"],VIcon:g["a"],VImg:f["a"],VMenu:_["a"],VOverlay:vt["a"],VParallax:pt["a"],VRow:Y["a"]}),a["a"].use(z["a"]);var wt=[{path:"/",redirect:"Home"},{path:"/Home",name:"Home",component:ft},{path:"/manage",name:"Manage",component:function(){return n.e("chunk-78a21d0d").then(n.bind(null,"f74b"))}}],bt=new z["a"]({mode:"history",base:"/",routes:wt}),kt=bt,Ct=n("f309");n("5363");a["a"].use(Ct["a"]);var xt=new Ct["a"]({icons:{iconfont:"mdi"}}),_t=n("bc3a"),St=n.n(_t),yt=n("5530"),It=n("d4ec"),Vt=n("bee2"),Ot=!0,$t=function(){function t(){Object(It["a"])(this,t)}return Object(Vt["a"])(t,null,[{key:"fetch",value:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n,a,r,s,i,o,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=c.length>2&&void 0!==c[2]?c[2]:"get",r=c.length>3?c[3]:void 0,i=window.location.origin||"http://localhost",/^\/api/.test(e)?s=Ot?"":"".concat(i):/^\/wx/.test(e)&&(s="".concat(i)),o={baseURL:s,method:a,timeout:15e3},o=Object.assign(o,r),o="get"===a?Object(yt["a"])({params:n},o):Object(yt["a"])({data:n},o),t.abrupt("return",St()(e,o).then((function(t){return t}))["catch"]((function(t){return{status:500,statusText:t.message||"network error",data:{status:500,msg:t.message||"network error"}}})));case 9:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{staticClass:"snackbar",attrs:{top:"",color:t.color,right:"",timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[n("v-icon",{staticClass:"mr-3",attrs:{dark:"",size:"20"}},[t._v(t._s(t.alertTip))]),n("div",{staticClass:"font-chinese"},[t._v(t._s(t.titleTip))]),n("v-icon",{attrs:{dark:"",size:"16"},on:{click:t.close}},[t._v("mdi-close")])],1)},Lt=[],Rt={data:function(){return{snackbar:!1,titleTip:"",alertTip:"",timeout:3e3,color:"success"}},methods:{close:function(){this.snackbar=!1},show:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mdi-alarm-light-outline",n=arguments.length>2?arguments[2]:void 0;this.snackbar=!0,this.titleTip=t,this.alertTip=e,this.color=n}}},Et=Rt,Bt=(n("d3da"),n("2db4")),Tt=Object(h["a"])(Et,jt,Lt,!1,null,null,null),Pt=Tt.exports;m()(Tt,{VIcon:g["a"],VSnackbar:Bt["a"]});var At={install:function(t,e){var n=e.router,a=t,r=a.extend(Pt),s=new r;s.$mount(document.createElement("div")),document.body.appendChild(s.$el);var i={showOk:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"搜索成功";s.show(t,"mdi-alarm-light-outline","success")},showError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"获取数据失败，请刷新重试";s.show(t,"mdi-alert-octagon-outline","error")},showStatus:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(t){case"search":e?this.showOk("搜索成功"):this.showError("搜索失败，请刷新重试");break;case"delete":e?this.showOk("删除成功"):this.showError("删除失败，请刷新重试");break;case"edit":e?this.showOk("编辑成功"):this.showError("编辑失败，请刷新重试");break;case"add":e?this.showOk("新增成功"):this.showError("新增失败，请刷新重试");break;default:break}}};a.prototype.$snackbar=function(t){return n.afterEach((function(){t||s.close()})),Object(yt["a"])({},i)}}},Mt=At;a["a"].prototype.$request=$t,a["a"].config.productionTip=!1,a["a"].use(Mt,{router:kt}),new a["a"]({router:kt,vuetify:xt,render:function(t){return t(U)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("7694"),r=n.n(a);r.a},"69d9":function(t,e,n){"use strict";var a=n("4e0f"),r=n.n(a);r.a},7694:function(t,e,n){},"7b2a":function(t,e,n){t.exports=n.p+"img/logo_png.a264b7dd.png"},"7bd6":function(t,e,n){"use strict";n("d3b7"),n("96cf");var a=n("1da1"),r=n("d4ec"),s=n("bee2"),i=function(){function t(){Object(r["a"])(this,t)}return Object(s["a"])(t,null,[{key:"compose",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,a){var r,s,i,o,c,u,l,h,d=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=function(t){return new Promise((function(e,n){t.onload=function(){return e(t)},t.onerror=n}))},r=d.length>3&&void 0!==d[3]?d[3]:{width:1e3,height:500,background:"#fff",padding:20},i=new Image,o=new Image,i.src=n,o.src=a,c=s(i),u=s(o),t.next=10,c;case 10:return t.next=12,u;case 12:return l=e,l.width=i.width+o.width+3*r.padding,console.log(i.width,o.width,l.width),l.height=r.height,h=l.getContext("2d"),h.fillStyle=r.background,h.fillRect(0,0,l.width,l.height),h.drawImage(i,r.padding,(r.height-i.height)/2,i.width,i.height),h.drawImage(o,2*r.padding+i.width,(r.height-o.height)/2,o.width,o.height),t.abrupt("return",l);case 22:case"end":return t.stop()}}),t)})));function e(e,n,a){return t.apply(this,arguments)}return e}()},{key:"changeSize",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var a,r,s,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onload;case 2:return a=e.height,r=e.width,s=r*(n/a),i=document.createElement("canvas"),i.width=s,i.height=n,o=i.getContext("2d"),o.drawImage(e,0,0,s,n),t.next=12,new Promise((function(t){return i.toBlob(t)}));case 12:return c=t.sent,t.abrupt("return",c);case 14:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}();e["a"]=i},8129:function(t,e,n){"use strict";var a=n("a271"),r=n.n(a);r.a},8210:function(t,e,n){"use strict";var a=n("c031"),r=n.n(a);r.a},"86a3":function(t,e,n){t.exports=n.p+"img/magic.a74d1fda.svg"},a271:function(t,e,n){},c031:function(t,e,n){},d3da:function(t,e,n){"use strict";var a=n("465c"),r=n.n(a);r.a},e347:function(t,e,n){t.exports=n.p+"img/logo.749af42d.svg"}});
//# sourceMappingURL=app.3f184c05.js.map